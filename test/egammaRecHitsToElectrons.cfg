# $Id: $
# make electrons using pixel and ECAL rec hits
# If you don't know how to do this consider using egammaRecHitsToElectrons.cfg instead.
#
# Created by Shahram Rahatlou from example by Ursula Berthon and Claude Charlot
#
process electrons = {

  ### keep the logging output to a nice level ###
  #include "FWCore/MessageLogger/data/MessageLogger.cfi"

  service = MessageLogger {
     untracked vstring destinations = {"cout"}
     untracked PSet cout = {
       untracked  PSet default = { untracked int32 limit = 0 }
       #untracked  string threshold = "Debug"
     }
  }

  source = PoolSource {
    untracked vstring fileNames = {'file:ecal+tracker_rechits.root'}
    untracked int32 maxEvents = -1
    untracked uint32 debugVerbosity = 1
    untracked bool   debugFlag     = true
  }

  # hybrid clustering in the barrel
  include "RecoEcal/EgammaClusterProducers/data/hybridClusteringSequence.cff"
  include "Geometry/CaloEventSetup/data/CaloGeometry.cfi"

  # sequence to make pixel-based electrons
  include "RecoEgamma/EgammaElectronProducers/data/pixelMatchElectronSequence.cff"
  path p = { hybridClusteringSequence, pixelMatchElectronSequence }

  module out = PoolOutputModule {
    untracked string fileName = "egamma_pixel_matched_electrons.root"
    untracked vstring outputCommands = {
        "drop *",
        "keep recoBasicClusters_*_*_*",
        "keep recoSuperClusters_*_*_*",
        "keep *_electronPixelSeeds_*_*",
        "keep *_pixelMatchElectrons_*_*"
    }
  }
  endpath outpath = { out }
}
