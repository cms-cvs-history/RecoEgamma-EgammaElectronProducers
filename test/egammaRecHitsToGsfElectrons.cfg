# $Id: egammaRecHitsToPixelMatchGsfElectrons.cfg,v 1.32 2008/07/01 16:06:32 charlot Exp $
# make Gsf electrons from pixel seed tracks
#
# Created by Shahram Rahatlou from example by Ursula Berthon and Claude Charlot
#

process electrons = {
  include "Configuration/StandardSequences/data/FakeConditions.cff"
  include "Configuration/StandardSequences/data/MagneticField.cff"

  ### keep the logging output to a nice level ###
#  include "FWCore/MessageLogger/data/MessageLogger.cfi"
  service = MessageLogger {
         untracked vstring debugModules = {   "pixelMatchGsfElectrons"   }
         untracked vstring categories    =    { "GsfElectronAlgo"}

         untracked vstring destinations =  {    "cout"  }
         untracked PSet cout   =  {
                 untracked string threshold = "DEBUG"
                 untracked PSet DEBUG ={untracked int32 limit = 0}
                 untracked PSet GsfElectronAlgo ={untracked int32 limit = 1000000000000}
         }
    }

  ## debugging services
  #service = EnableFloatingPointExceptions {}
  #service = Tracer {}

  source = PoolSource {
    untracked vstring fileNames =
#     {'/store/relval/2008/2/4/RelVal-SingleElectronPt35-1202115095-HLT/0000/AEB9CAE2-51D3-DC11-9D5C-001617C3B6E2.root'}
	{'/store/relval/2008/4/6/RelVal-RelValSingleElectronPt10-1207410101-HLT/0000/0AC2CD1A-0E04-DD11-844D-000423D99896.root'}
    untracked uint32 debugVerbosity = 1
    untracked bool   debugFlag     = true
  }
  
    replace PoolSource.fileNames = {
    '/store/relval/2008/6/20/RelVal-RelValSingleElectronPt35-1213920853-IDEAL_V2-2nd/0000/46B8706D-B53E-DD11-84E1-000423D991F0.root',
    '/store/relval/2008/6/20/RelVal-RelValSingleElectronPt35-1213920853-IDEAL_V2-2nd/0000/5C6A256E-B53E-DD11-839C-000423D9997E.root',
    '/store/relval/2008/6/20/RelVal-RelValSingleElectronPt35-1213920853-IDEAL_V2-2nd/0000/70651DC5-B63E-DD11-80F8-000423D991F0.root',
    '/store/relval/2008/6/20/RelVal-RelValSingleElectronPt35-1213920853-IDEAL_V2-2nd/0000/981FC52C-B63E-DD11-ACD8-001617DF785A.root'
//    '/store/relval/2008/6/20/RelVal-RelValSingleElectronPt35-1213920853-IDEAL_V2-2nd/0000/EA0F4D78-B43E-DD11-8CEC-0019DB29C614.root'
    }

  untracked PSet maxEvents = {untracked int32 input = -1}

  # complete clustering sequence
  include "RecoEcal/EgammaClusterProducers/data/ecalClusteringSequence.cff"
  
  # needed cfi/cff to built tracker hits
  include "RecoLocalTracker/SiPixelRecHits/data/SiPixelRecHits.cfi"
  include "RecoLocalTracker/SiStripRecHitConverter/data/SiStripRecHitConverter.cfi"
  include "RecoLocalTracker/SiStripRecHitConverter/data/SiStripRecHitMatcher.cfi"
  include "RecoLocalTracker/SiStripRecHitConverter/data/StripCPEfromTrackAngle.cfi"
  include "RecoLocalTracker/SiStripZeroSuppression/data/SiStripZeroSuppression.cfi"
  include "RecoLocalTracker/SiStripClusterizer/data/SiStripClusterizer.cfi"
  include "RecoLocalTracker/SiPixelClusterizer/data/SiPixelClusterizer.cfi"
  include "RecoLocalTracker/SiPixelRecHits/data/PixelCPEESProducers.cff"

  # sequence to make pixel-based Gsf electrons
  include "RecoEgamma/EgammaElectronProducers/data/pixelMatchGsfElectronSequence.cff"
  
  path p = { siPixelRecHits, siStripMatchedRecHits,
   newSeedFromPairs,newSeedFromTriplets, newCombinedSeeds,
   ecalClusteringSequence, pixelMatchGsfElectronSequence }

  module out = PoolOutputModule {
    untracked string fileName =   "electrons.root"
    untracked vstring outputCommands = {
       "drop *",
       "keep SiPixel*_*_*_*",
       "keep SiStrip*_*_*_*",
       "keep HBHER*_*_*_*",
       "keep recoBasicClusters*_*_*_*",
       "keep recoSuperClusters*_*_*_*",
       "keep *_iterativeCone5CaloJets_*_*",
       "keep recoTrackExtras*_*_*_*",
       "keep *_*_*_electrons",
       "keep *HepMCProduct_*_*_*"
    }
  }
  service = Timing { }
  endpath outpath = { out }
}
