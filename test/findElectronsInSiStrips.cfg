process pr = 
{
  service = MessageLogger {}

  # standard Monte Carlo
  source = PoolSource
  {
     untracked vstring fileNames = 
     {
         "/uscms_data/d1/ecarrera/generation/datafiles/Zee_0_7_0/Zee_digi_2001_200.root",
         "/uscms_data/d1/ecarrera/generation/datafiles/Zee_0_7_0/Zee_digi_2002_200.root",
         "/uscms_data/d1/ecarrera/generation/datafiles/Zee_0_7_0/Zee_digi_2003_200.root",
         "/uscms_data/d1/ecarrera/generation/datafiles/Zee_0_7_0/Zee_digi_2004_200.root",
         "/uscms_data/d1/ecarrera/generation/datafiles/Zee_0_7_0/Zee_digi_2005_200.root"
     }
     untracked int32 maxEvents = -1
  } 

  ################################################ Event/EventSetup for tracker hits

  # tracker geometry
  include "Geometry/TrackerGeometryBuilder/data/trackerGeometry.cfi"

  # tracker numbering
  include "Geometry/TrackerNumberingBuilder/data/trackerNumberingGeometry.cfi"

  # standard geometry
  include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"

  # magnetic field
  include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"

  # make SiStrip rechits
  include "RecoLocalTracker/SiStripRecHitConverter/data/StripCPEfromTrackAngle.cfi"
  include "RecoLocalTracker/SiStripClusterizer/data/SiStripClusterizer.cfi"
  include "RecoLocalTracker/SiStripRecHitConverter/data/SiStripRecHitConverter.cfi"

  ################################################ Find the electrons

  # Find the electrons
  include "RecoEgamma/EgammaElectronProducers/data/findElectronsInSiStrips.cfi"

  ################################################ Event/EventSetup for track fitting

  # KFUpdatoerESProducer
  include "TrackingTools/KalmanUpdators/data/KFUpdatorESProducer.cfi"

  # Chi2MeasurementEstimatorESProducer
  include "TrackingTools/KalmanUpdators/data/Chi2MeasurementEstimatorESProducer.cfi"

  # KFTrajectoryFitterESProducer
  include "TrackingTools/TrackFitters/data/KFTrajectoryFitterESProducer.cfi"

  # KFTrajectorySmootherESProducer
  include "TrackingTools/TrackFitters/data/KFTrajectorySmootherESProducer.cfi"

  # KFFittingSmootherESProducer
  include "TrackingTools/TrackFitters/data/KFFittingSmootherESProducer.cfi"

  # PropagatorWithMaterialESProducer
  include "TrackingTools/MaterialEffects/data/MaterialPropagator.cfi"

  # PropagatorWithMaterialESProducer
  include "TrackingTools/MaterialEffects/data/OppositeMaterialPropagator.cfi"
  # stripCPE
  include "RecoLocalTracker/SiStripRecHitConverter/data/StripCPEfromTrackAngle.cfi"
  # pixelCPE
  include "RecoLocalTracker/SiPixelRecHits/data/PixelCPEParmError.cfi"
  #TransientTrackingBuilder
  include "RecoTracker/TransientTrackingRecHit/data/TransientTrackingRecHitBuilder.cfi"


  # TrackProducer
  include "RecoTracker/TrackProducer/data/CTFFinalFitWithMaterial.cfi"
  replace CTFWMaterial.src = "findElectronsInSiStrips"

  ################################################ Event/EventSetup for track fitting

#  # Print out objects, to be sure we made them
#  module eventcontent = EventContentAnalyzer {}

  # No output
  module out = PoolOutputModule
  {
     untracked string fileName = "eventdata.root"
     untracked vstring outputCommands = 
      {  
         "drop *",
         "keep *_*_islandBarrelSuperClusterCollection_*", 
         "keep *_*_correctedSuperclusterCollection_*", 
         "keep *_*_rphiRecHit_*", 
         "keep *_*_stereoRecHit_*", 
         "keep *_findElectronsInSiStrips_*_*", 
         "keep *_CTFWMaterial_*_*", 
         "keep *_VtxSmeared_*_*", 
         "keep *_source_*_*"
       }
  }

  path p = 
  {
    ThreeThresholdClusterizer,
    LocalMeasurementConverter,
    findElectronsInSiStrips,
    CTFWMaterial
#    eventcontent
  }

  endpath e = {out}
}
